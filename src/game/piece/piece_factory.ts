import { Piece } from "./piece.js";
import { PIECE_COLORS } from "../../utils/colors.js";

export class PieceFactory
{
  static shapes: number[][][] = [
    // 1×2 і 2×1
    [[1, 1]],
    [[1], [1]],

    // 1×3 і 3×1
    [[1, 1, 1]],
    [[1], [1], [1]],

    // 1×4 і 4×1
    [[1, 1, 1, 1]],
    [[1], [1], [1], [1]],

    // 1×5 і 5×1
    [[1, 1, 1, 1, 1]],
    [[1], [1], [1], [1], [1]],

    // квадрати
    [
      [1, 1],
      [1, 1],
    ],
    [
      [1, 1, 1],
      [1, 1, 1],
      [1, 1, 1],
    ],
    [
      [1, 1, 1, 1],
      [1, 1, 1, 1],
      [1, 1, 1, 1],
      [1, 1, 1, 1],
    ],

    // прямокутники
    [
      [1, 1, 1],
      [1, 1, 1],
    ],
    [[1, 1], [1, 1], [1, 1]],

    [
      [1, 1, 1, 1],
      [1, 1, 1, 1],
    ],
    [[1, 1], [1, 1], [1, 1], [1, 1]],

    [
      [1, 1, 1, 1],
      [1, 1, 1, 1],
      [1, 1, 1, 1],
    ],
    [[1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1]],

    // L-подібні (2×3, 3×2, 3×3, 2x2)
    [
      [1, 1],
      [1, 0],
    ],
    [
      [0, 1],
      [1, 1],
    ],
    [
      [1, 1],
      [0, 1],
    ],
    [
      [1, 0],
      [1, 1],
    ],
    [
      [1, 0],
      [1, 0],
      [1, 1],
    ],
    [
      [0, 1],
      [0, 1],
      [1, 1],
    ],
    [
      [1, 1, 1],
      [1, 0, 0],
    ],
    [
      [1, 0, 0],
      [1, 1, 1],
    ],
    [
      [1, 1, 1],
      [1, 0, 0],
      [1, 0, 0],
    ],
    [
      [1, 1, 1],
      [0, 0, 1],
      [0, 0, 1],
    ],

    [
      [1, 0, 0],
      [1, 0, 0],
      [1, 1, 1],
    ],
    [
      [0, 0, 1],
      [0, 0, 1],
      [1, 1, 1],
    ],

    // T-подібні
    [
      [1, 1, 1],
      [0, 1, 0],
    ],
    [
      [0, 1],
      [1, 1],
      [0, 1],
    ],
    [
      [0, 1, 0],
      [1, 1, 1],
    ],
    [
      [1, 0],
      [1, 1],
      [1, 0],
    ],

    // плюс
    [
      [0, 1, 0],
      [1, 1, 1],
      [0, 1, 0],
    ],

    // зигзаги
    [
      [1, 1, 0],
      [0, 1, 1],
    ],
    [
      [0, 1, 1],
      [1, 1, 0],
    ],
    [
      [1, 0],
      [1, 1],
      [0, 1]
    ],
    [
      [0, 1],
      [1, 1],
      [1, 0]
    ],

    // діагоналі
    [
      [1, 0, 0],
      [0, 1, 0],
      [0, 0, 1],
    ],
    [
      [0, 0, 1],
      [0, 1, 0],
      [1, 0, 0],
    ],
    [
      [1, 0],
      [0, 1],
    ],
    [
      [0, 1],
      [1, 0],
    ],
  ];

  static randomPiece(): Piece
  {
    const shape = this.shapes[Math.floor( Math.random() * this.shapes.length )];
    const color = PIECE_COLORS[Math.floor( Math.random() * PIECE_COLORS.length )];
    return new Piece( shape, color );
  }
}
